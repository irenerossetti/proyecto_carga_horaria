{
    "openapi": "3.0.0",
    "info": {
        "title": "Proyecto Carga Horaria - API",
        "description": "Documentación completa de la API del sistema de gestión de carga horaria docente",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Servidor local de desarrollo"
        }
    ],
    "paths": {
        "/api/periods": {
            "get": {
                "tags": [
                    "Periodos Académicos"
                ],
                "summary": "CU04 - Listar periodos académicos",
                "description": "Lista todos los periodos académicos ordenados por fecha de creación descendente",
                "operationId": "825085e7a50f37c9027818addabdccf0",
                "responses": {
                    "200": {
                        "description": "Lista de periodos académicos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer"
                                            },
                                            "name": {
                                                "type": "string"
                                            },
                                            "start_date": {
                                                "type": "string",
                                                "format": "date",
                                                "nullable": true
                                            },
                                            "end_date": {
                                                "type": "string",
                                                "format": "date",
                                                "nullable": true
                                            },
                                            "status": {
                                                "type": "string",
                                                "enum": [
                                                    "draft",
                                                    "active",
                                                    "closed"
                                                ]
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Solo administradores"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Periodos Académicos"
                ],
                "summary": "CU04 - Crear periodo académico",
                "description": "Crea un nuevo periodo académico con estado 'draft'",
                "operationId": "7c0a6286c05986459da8c436db70ee22",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "2025-1"
                                    },
                                    "start_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-03-01",
                                        "nullable": true
                                    },
                                    "end_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-07-31",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Periodo creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "status": {
                                            "type": "string",
                                            "example": "draft"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "422": {
                        "description": "Validación fallida"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/periods/{id}/activate": {
            "post": {
                "tags": [
                    "Periodos Académicos"
                ],
                "summary": "CU04 - Activar periodo académico",
                "description": "Activa un periodo y cierra automáticamente cualquier periodo activo anterior",
                "operationId": "2bc97c8a1e540754f928b0ded90fbe0f",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Periodo activado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Period activated"
                                        },
                                        "period": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Periodo no encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/periods/{id}/close": {
            "post": {
                "tags": [
                    "Periodos Académicos"
                ],
                "summary": "CU04 - Cerrar periodo académico",
                "description": "Cierra un periodo académico",
                "operationId": "be822c20eca77738a80eeb625dbb7617",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Periodo cerrado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Period closed"
                                        },
                                        "period": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Periodo no encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/periods/{id}": {
            "delete": {
                "tags": [
                    "Periodos Académicos"
                ],
                "summary": "CU04 - Eliminar periodo académico",
                "description": "Elimina un periodo académico",
                "operationId": "c3ee5ee8b97eda5465c932d8c82de067",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Periodo eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Period deleted"
                                        },
                                        "id": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Periodo no encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Periodos Académicos"
                ],
                "summary": "CU04 - Actualizar periodo académico",
                "description": "Actualiza los datos de un periodo académico. Si se cambia el status a 'active', cierra automáticamente otros periodos activos",
                "operationId": "a78578e28fe692141b03a2ae204b4949",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "start_date": {
                                        "type": "string",
                                        "format": "date",
                                        "nullable": true
                                    },
                                    "end_date": {
                                        "type": "string",
                                        "format": "date",
                                        "nullable": true
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "draft",
                                            "active",
                                            "closed"
                                        ],
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Periodo actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "period": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Periodo no encontrado"
                    },
                    "422": {
                        "description": "Validación fallida - start_date debe ser antes de end_date"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/admin/dashboard": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "CU23 - Panel de Control Administrativo",
                "operationId": "97acf12e9dd8231f6a9cbd262c54c20c",
                "responses": {
                    "200": {
                        "description": "Estadísticas resumidas para admin"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/attendances": {
            "get": {
                "tags": [
                    "Asistencias"
                ],
                "summary": "CU17 - Listar asistencias",
                "operationId": "f7564e4f8fdec50c27cf2a372050327d",
                "parameters": [
                    {
                        "name": "teacher_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "date",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de asistencias"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Asistencias"
                ],
                "summary": "CU17 - Registrar asistencia manual",
                "operationId": "3bb1ac6de1eb26f4dd68ec47de293f0f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "teacher_id",
                                    "date",
                                    "status"
                                ],
                                "properties": {
                                    "teacher_id": {
                                        "type": "integer"
                                    },
                                    "schedule_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "date": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "time": {
                                        "type": "string",
                                        "example": "08:00"
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "present",
                                            "absent",
                                            "late"
                                        ]
                                    },
                                    "notes": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Asistencia creada"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/attendances/{id}": {
            "get": {
                "tags": [
                    "Asistencias"
                ],
                "summary": "Ver asistencia por ID",
                "operationId": "93fd498c5bf6c3f35400901934933877",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Asistencia encontrada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Asistencias"
                ],
                "summary": "Eliminar asistencia",
                "operationId": "3b1350863e6c4643d660bad18a27d91e",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Asistencia eliminada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Asistencias"
                ],
                "summary": "Actualizar asistencia",
                "operationId": "ff4670b4b30e2930e233e4fc7031e195",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "present",
                                            "absent",
                                            "late"
                                        ]
                                    },
                                    "notes": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "time": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Asistencia actualizada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/attendances/qr": {
            "post": {
                "tags": [
                    "Asistencias"
                ],
                "summary": "CU18 - Registrar asistencia mediante código QR",
                "description": "Registra asistencia validando un token QR firmado con HMAC-SHA256",
                "operationId": "e446aa69dd98b6efb0c4453d48d86d9c",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "qr_payload": {
                                        "description": "Token firmado (payload.signature)",
                                        "type": "string"
                                    },
                                    "schedule_id": {
                                        "description": "ID del horario (legacy)",
                                        "type": "integer"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Asistencia registrada"
                    },
                    "422": {
                        "description": "QR inválido o expirado"
                    },
                    "409": {
                        "description": "QR ya utilizado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/reports/attendances/teacher/{id}": {
            "get": {
                "tags": [
                    "Reportes"
                ],
                "summary": "CU24 - Visualizar asistencia por docente",
                "operationId": "f30fd1322dfad77d07f9533b477e5d70",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reporte de asistencia por docente"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/reports/attendances/group/{id}": {
            "get": {
                "tags": [
                    "Reportes"
                ],
                "summary": "CU25 - Visualizar asistencia por grupo",
                "operationId": "13e8be7f229d52f16a851036bb2020dd",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reporte de asistencia por grupo"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/cancellations": {
            "get": {
                "tags": [
                    "Cancelaciones"
                ],
                "summary": "CU19 - Listar cancelaciones de clases",
                "description": "Lista todas las cancelaciones. Admin ve todas, docentes solo las propias",
                "operationId": "577e70be102903ba2ef3d28c88ba890f",
                "parameters": [
                    {
                        "name": "teacher_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "schedule_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de cancelaciones"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/cancellations/{id}": {
            "get": {
                "tags": [
                    "Cancelaciones"
                ],
                "summary": "CU19 - Ver cancelación por ID",
                "description": "Obtiene los detalles de una cancelación específica",
                "operationId": "7ff1d64d98cb8a50466f74c2b1501b1d",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cancelación encontrada"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "No encontrada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Cancelaciones"
                ],
                "summary": "CU19 - Eliminar cancelación (Admin)",
                "description": "Elimina un registro de cancelación. Solo administradores",
                "operationId": "09ad00fa2f937bc0b88398c7fc68daec",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cancelación eliminada"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "No encontrada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/conflicts": {
            "get": {
                "tags": [
                    "Conflictos"
                ],
                "summary": "CU20 - Visualizar panel de conflictos horarios",
                "operationId": "bcdbe281bc6698494a7c7e4a173aeb82",
                "parameters": [
                    {
                        "name": "only_unresolved",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de conflictos detectados (y resueltos)"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Conflictos"
                ],
                "summary": "Marcar/Resolver un conflicto manualmente",
                "operationId": "2e83adf4ae6c4737683b9c2b65fc32cb",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "schedule_a_id",
                                    "schedule_b_id"
                                ],
                                "properties": {
                                    "schedule_a_id": {
                                        "type": "integer"
                                    },
                                    "schedule_b_id": {
                                        "type": "integer"
                                    },
                                    "resolution_note": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Conflicto marcado/creado"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/groups": {
            "get": {
                "tags": [
                    "Grupos"
                ],
                "summary": "CU09 - Listar grupos",
                "operationId": "f286cbf34dc4be32a94459a335658168",
                "responses": {
                    "200": {
                        "description": "Lista de grupos"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Grupos"
                ],
                "summary": "CU09 - Crear grupo",
                "operationId": "74e9878763e20c38ae5c9930b8d2d3f6",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "subject_id",
                                    "code",
                                    "name"
                                ],
                                "properties": {
                                    "subject_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "code": {
                                        "type": "string",
                                        "example": "SIS-101-A"
                                    },
                                    "name": {
                                        "type": "string",
                                        "example": "Grupo A"
                                    },
                                    "capacity": {
                                        "type": "integer",
                                        "example": 30,
                                        "nullable": true
                                    },
                                    "schedule": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Grupo creado"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "422": {
                        "description": "Validación fallida"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/groups/{id}": {
            "get": {
                "tags": [
                    "Grupos"
                ],
                "summary": "CU09 - Ver grupo",
                "operationId": "38a1f4990d0dc69ead7f7377ad016117",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Grupo encontrado"
                    },
                    "404": {
                        "description": "No encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Grupos"
                ],
                "summary": "CU09 - Eliminar grupo",
                "operationId": "8c693e934c350f47618655bc71886930",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Grupo eliminado"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Grupos"
                ],
                "summary": "CU09 - Actualizar grupo",
                "operationId": "6b5bdcc481f83af9eb4b4d157cfa36f5",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "subject_id": {
                                        "type": "integer"
                                    },
                                    "code": {
                                        "type": "string"
                                    },
                                    "name": {
                                        "type": "string"
                                    },
                                    "capacity": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "schedule": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Grupo actualizado"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/imports": {
            "post": {
                "tags": [
                    "Importación"
                ],
                "summary": "CU12 - Importar datos masivos desde CSV/Excel",
                "description": "Importa docentes, materias o grupos desde archivo CSV o Excel",
                "operationId": "718d10f8541fc2c2273c3ccbdfd8abd5",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "type",
                                    "file"
                                ],
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "enum": [
                                            "teachers",
                                            "subjects",
                                            "groups"
                                        ],
                                        "example": "teachers"
                                    },
                                    "file": {
                                        "description": "Archivo CSV o Excel",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Importación completada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "created": {
                                            "type": "integer",
                                            "example": 10
                                        },
                                        "updated": {
                                            "type": "integer",
                                            "example": 5
                                        },
                                        "errors": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Solo administradores"
                    },
                    "422": {
                        "description": "Archivo inválido"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/reports/schedules": {
            "get": {
                "tags": [
                    "Reportes"
                ],
                "summary": "CU26 - Generar reporte de horarios (PDF/Excel)",
                "operationId": "085d2bcf4bf089e08a4c6b902bddfdb6",
                "parameters": [
                    {
                        "name": "format",
                        "in": "query",
                        "description": "Formato de salida",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pdf",
                                "xlsx"
                            ]
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "teacher_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "group_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Archivo descargable PDF o Excel"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/reports/attendances": {
            "get": {
                "tags": [
                    "Reportes"
                ],
                "summary": "CU27 - Generar reporte de asistencia (PDF/Excel)",
                "operationId": "9fda41840b8c1d83840c9b1f70ba05ed",
                "parameters": [
                    {
                        "name": "format",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pdf",
                                "xlsx"
                            ]
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "teacher_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Archivo descargable PDF o Excel"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/reports/workload": {
            "get": {
                "tags": [
                    "Reportes"
                ],
                "summary": "CU28 - Generar reporte de carga horaria por docente (PDF/Excel)",
                "operationId": "3ccdc8fdb3ae7e550d36b59a960c71b3",
                "parameters": [
                    {
                        "name": "format",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pdf",
                                "xlsx"
                            ]
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Archivo descargable PDF o Excel"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/reservations/available": {
            "get": {
                "tags": [
                    "Reservas"
                ],
                "summary": "CU22 - Consultar aulas liberadas por anulación",
                "operationId": "1b0da1dd84b4abf9846e9360b34d5f8d",
                "parameters": [
                    {
                        "name": "date",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "start_time",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "end_time",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de aulas liberadas por anulaciones"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/reservations": {
            "get": {
                "tags": [
                    "Reservas"
                ],
                "summary": "Listar reservas del usuario (docente) o todas (admin)",
                "operationId": "fbc6050d9f7fdb07075d3aaeb157ffa9",
                "responses": {
                    "200": {
                        "description": "Lista de reservas"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Reservas"
                ],
                "summary": "CU22 - Reservar aula liberada por anulación",
                "operationId": "01e3d21dc330a31de025203bc142ffa3",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "room_id",
                                    "reserved_at",
                                    "expires_at"
                                ],
                                "properties": {
                                    "room_id": {
                                        "type": "integer"
                                    },
                                    "schedule_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "reserved_at": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "expires_at": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "notes": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Reserva creada"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/roles": {
            "get": {
                "tags": [
                    "Roles"
                ],
                "summary": "CU05 - Listar roles",
                "description": "Lista todos los roles disponibles en el sistema",
                "operationId": "77e3636d8592997ce9d6d27b50857a69",
                "responses": {
                    "200": {
                        "description": "Lista de roles",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer"
                                            },
                                            "name": {
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Solo administradores"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Roles"
                ],
                "summary": "CU05 - Crear rol",
                "description": "Crea un nuevo rol en el sistema",
                "operationId": "4a563842fbfcad237f63da43065fca3d",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "coordinador"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Rol creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "rol_id": {
                                            "type": "integer"
                                        },
                                        "nombre": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "422": {
                        "description": "Validación fallida"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/users/{id}/roles": {
            "get": {
                "tags": [
                    "Roles"
                ],
                "summary": "CU05 - Obtener roles de usuario",
                "description": "Lista los roles asignados a un usuario específico",
                "operationId": "ada802ae05b1d43b39b9765cba88caf2",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del usuario",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de roles del usuario",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                },
                                "example": [
                                    "docente",
                                    "coordinador"
                                ]
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Usuario no encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Roles"
                ],
                "summary": "CU05 - Asignar roles a usuario",
                "description": "Asigna uno o más roles a un usuario específico",
                "operationId": "9aea68cd4553f433ebbbc97ae6d2b568",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del usuario",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "roles"
                                ],
                                "properties": {
                                    "roles": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "docente",
                                            "coordinador"
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Roles asignados exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "roles": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Usuario o roles no encontrados"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/roles/{id}": {
            "delete": {
                "tags": [
                    "Roles"
                ],
                "summary": "CU05 - Eliminar rol",
                "description": "Elimina un rol si no está asignado a ningún usuario",
                "operationId": "8285c46981c60ad600aa4077307aec04",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Rol eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Role deleted"
                                        },
                                        "id": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Rol no encontrado"
                    },
                    "409": {
                        "description": "Rol está asignado a usuarios, no se puede eliminar"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Roles"
                ],
                "summary": "CU05 - Actualizar rol",
                "description": "Actualiza el nombre de un rol existente",
                "operationId": "25c6de44db414c453e08051fb992eb22",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "coordinador_académico"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Rol actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "name": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Rol no encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/rooms": {
            "get": {
                "tags": [
                    "Aulas"
                ],
                "summary": "CU10 - Listar aulas",
                "operationId": "bea681612754126f01807ff95647eb34",
                "responses": {
                    "200": {
                        "description": "Lista de aulas"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Aulas"
                ],
                "summary": "CU10 - Crear aula",
                "operationId": "cd6c1029f22e2425a1f99cf83e27383a",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Aula 101"
                                    },
                                    "capacity": {
                                        "type": "integer",
                                        "example": 40,
                                        "nullable": true
                                    },
                                    "location": {
                                        "type": "string",
                                        "example": "Edificio A, Piso 1",
                                        "nullable": true
                                    },
                                    "resources": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Aula creada"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/rooms/{id}": {
            "get": {
                "tags": [
                    "Aulas"
                ],
                "summary": "CU10 - Ver aula",
                "operationId": "91a59d880bb0297e8321dd75af8f506b",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Aula encontrada"
                    },
                    "404": {
                        "description": "No encontrada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Aulas"
                ],
                "summary": "CU10 - Eliminar aula",
                "operationId": "61024891be80949c0aaa6e4536381225",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Aula eliminada"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Aulas"
                ],
                "summary": "CU10 - Actualizar aula",
                "operationId": "a0f53b42dd7a07e588b619d3c2031d6d",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "capacity": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "location": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "resources": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Aula actualizada"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/rooms/{id}/equipment": {
            "get": {
                "tags": [
                    "Aulas"
                ],
                "summary": "CU11 - Ver equipamiento del aula",
                "operationId": "6d44552c34f48a64780faf22174aeaa1",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Equipamiento del aula",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "equipment": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Aulas"
                ],
                "summary": "CU11 - Actualizar equipamiento del aula",
                "operationId": "f76d388fd6b70ea612426e0fce431830",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "equipment"
                                ],
                                "properties": {
                                    "equipment": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "Proyector",
                                            "Pizarra digital",
                                            "30 computadoras"
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Equipamiento actualizado"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/rooms/available": {
            "get": {
                "tags": [
                    "Aulas"
                ],
                "summary": "CU21 - Consultar aulas disponibles",
                "operationId": "d0e4d227d3155d4cc01da6bc84a6104b",
                "parameters": [
                    {
                        "name": "date",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "day",
                        "in": "query",
                        "schema": {
                            "description": "día de la semana, opcional",
                            "type": "string"
                        }
                    },
                    {
                        "name": "start_time",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "example": "08:00"
                        }
                    },
                    {
                        "name": "end_time",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "example": "10:00"
                        }
                    },
                    {
                        "name": "equipment",
                        "in": "query",
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    },
                    {
                        "name": "capacity",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de aulas disponibles"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/schedules": {
            "get": {
                "tags": [
                    "Horarios"
                ],
                "summary": "CU13 - Listar horarios",
                "operationId": "c2791edf6c0550c67fac652cad98e09e",
                "parameters": [
                    {
                        "name": "group_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "teacher_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de horarios"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Horarios"
                ],
                "summary": "CU13 - Crear horario",
                "operationId": "cec681726db3f091faae4410db8ee14c",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "group_id",
                                    "day_of_week",
                                    "start_time",
                                    "end_time"
                                ],
                                "properties": {
                                    "group_id": {
                                        "type": "integer"
                                    },
                                    "room_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "teacher_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "day_of_week": {
                                        "type": "string",
                                        "example": "lunes"
                                    },
                                    "start_time": {
                                        "type": "string",
                                        "example": "08:00"
                                    },
                                    "end_time": {
                                        "type": "string",
                                        "example": "10:00"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Horario creado"
                    },
                    "409": {
                        "description": "Conflicto de horario"
                    },
                    "422": {
                        "description": "Validación fallida"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/schedules/weekly": {
            "get": {
                "tags": [
                    "Horarios"
                ],
                "summary": "Ver horarios semanales agrupados por día",
                "operationId": "14493faca0abc670fdaaddd055f338bd",
                "parameters": [
                    {
                        "name": "teacher_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "group_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Horarios agrupados por día"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/schedules/export": {
            "get": {
                "tags": [
                    "Horarios"
                ],
                "summary": "CU16 - Exportar horarios a Excel",
                "description": "Exporta los horarios en formato Excel (.xlsx)",
                "operationId": "1025b846ee23de85cfe8613e582a4415",
                "parameters": [
                    {
                        "name": "teacher_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "group_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Archivo Excel",
                        "content": {
                            "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {}
                        }
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/schedules/export.pdf": {
            "get": {
                "tags": [
                    "Horarios"
                ],
                "summary": "CU16 - Exportar horarios a PDF",
                "description": "Exporta los horarios en formato PDF",
                "operationId": "c052f4b01d2be903be422fe1425c0646",
                "parameters": [
                    {
                        "name": "teacher_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "group_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Archivo PDF",
                        "content": {
                            "application/pdf": {}
                        }
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/schedules/{id}": {
            "get": {
                "tags": [
                    "Horarios"
                ],
                "summary": "Ver horario por ID",
                "operationId": "da250e6293de88a6bb2201d3d53ebe82",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Horario encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Horarios"
                ],
                "summary": "CU15 - Eliminar horario",
                "operationId": "0c464af4e687525872f4eb274eac5d7c",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Horario eliminado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Horarios"
                ],
                "summary": "CU14 - Actualizar horario",
                "operationId": "685c4a08d721cd297201f601a2693c99",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "room_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "teacher_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "start_time": {
                                        "type": "string"
                                    },
                                    "end_time": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Horario actualizado"
                    },
                    "409": {
                        "description": "Conflicto de horario"
                    },
                    "422": {
                        "description": "Validación fallida"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/schedules/{id}/cancel": {
            "post": {
                "tags": [
                    "Horarios"
                ],
                "summary": "CU19 - Anular clase o cambiar a modalidad virtual",
                "operationId": "d084344f105aef3d3f36dfb72cc24a14",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "mode"
                                ],
                                "properties": {
                                    "mode": {
                                        "type": "string",
                                        "enum": [
                                            "cancelled",
                                            "virtual"
                                        ]
                                    },
                                    "reason": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Cancelación registrada"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/schedules/{id}/qrcode": {
            "get": {
                "tags": [
                    "Horarios"
                ],
                "summary": "CU18 - Generar código QR firmado para un horario",
                "description": "Genera un código QR con token firmado HMAC-SHA256 para registro de asistencia",
                "operationId": "c9ab73b257d3b0da58187ad95d42ca15",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del horario",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Imagen PNG del código QR",
                        "content": {
                            "image/png": {}
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Horario no encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/schedules/generate": {
            "post": {
                "tags": [
                    "Horarios"
                ],
                "summary": "CU15 - Generar horarios automáticamente",
                "description": "Genera horarios para grupos sin asignación usando algoritmo greedy. Asigna automáticamente aulas y docentes disponibles.",
                "operationId": "ec604e911fdbeb0e35aa200b4e6c09f5",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "period_id": {
                                        "description": "ID del periodo académico (opcional)",
                                        "type": "integer",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Generación completada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "created": {
                                            "description": "Cantidad de horarios creados",
                                            "type": "integer"
                                        },
                                        "schedules": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Solo administradores"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/subjects": {
            "get": {
                "tags": [
                    "Materias"
                ],
                "summary": "CU08 - Listar materias",
                "operationId": "c855f23389ed099cf68e0ec8b726d707",
                "responses": {
                    "200": {
                        "description": "Lista de materias"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Materias"
                ],
                "summary": "CU08 - Crear materia",
                "operationId": "acfe3773777c814aad62a7c623672b37",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "code",
                                    "name"
                                ],
                                "properties": {
                                    "code": {
                                        "type": "string",
                                        "example": "SIS-101"
                                    },
                                    "name": {
                                        "type": "string",
                                        "example": "Programación I"
                                    },
                                    "credits": {
                                        "type": "integer",
                                        "example": 4,
                                        "nullable": true
                                    },
                                    "description": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Materia creada"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "422": {
                        "description": "Código duplicado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/subjects/{id}": {
            "get": {
                "tags": [
                    "Materias"
                ],
                "summary": "CU08 - Ver materia",
                "operationId": "051f52e9b82cde48605830b5099e1870",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Materia encontrada"
                    },
                    "404": {
                        "description": "No encontrada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Materias"
                ],
                "summary": "CU08 - Eliminar materia",
                "operationId": "66808726432e96fed2fcea3bca0b74a3",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Materia eliminada"
                    },
                    "403": {
                        "description": "Forbidden"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Materias"
                ],
                "summary": "CU08 - Actualizar materia",
                "operationId": "2169836e5c1af07812b48eb5cf7e0b67",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "code": {
                                        "type": "string"
                                    },
                                    "name": {
                                        "type": "string"
                                    },
                                    "credits": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "description": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Materia actualizada"
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "422": {
                        "description": "Código duplicado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/assignments": {
            "get": {
                "tags": [
                    "Asignaciones"
                ],
                "summary": "CU13 - Listar asignaciones de carga horaria",
                "operationId": "377dbfc7cc51d6d1f2c0789a1b79e613",
                "parameters": [
                    {
                        "name": "teacher_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "period_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de asignaciones"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/teachers/{id}/assignments": {
            "post": {
                "tags": [
                    "Asignaciones"
                ],
                "summary": "CU13 - Crear asignación de carga horaria",
                "operationId": "b9f7c32d526d0f49b29fb6b914bb425a",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "teacher_id"
                                ],
                                "properties": {
                                    "teacher_id": {
                                        "type": "integer"
                                    },
                                    "subject_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "group_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "period_id": {
                                        "type": "integer",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Asignación creada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/assignments/{id}": {
            "get": {
                "tags": [
                    "Asignaciones"
                ],
                "summary": "CU13 - Ver asignación por ID",
                "operationId": "9bc0e721dabcd57e7d9f8299f11866f1",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Asignación encontrada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Asignaciones"
                ],
                "summary": "CU13 - Eliminar asignación",
                "operationId": "7201974cfddf941bd88c603013650130",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Asignación eliminada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Asignaciones"
                ],
                "summary": "CU13 - Actualizar asignación",
                "operationId": "5a50500e425902a61b1b181a0d69db99",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "subject_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "group_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "period_id": {
                                        "type": "integer",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Asignación actualizada"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/teachers": {
            "get": {
                "tags": [
                    "Docentes"
                ],
                "summary": "CU06 - Listar docentes",
                "description": "Lista todos los docentes registrados en el sistema",
                "operationId": "9115585a972eee31c1bb78305dc1620c",
                "responses": {
                    "200": {
                        "description": "Lista de docentes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer"
                                            },
                                            "name": {
                                                "type": "string"
                                            },
                                            "email": {
                                                "type": "string",
                                                "format": "email"
                                            },
                                            "dni": {
                                                "type": "string",
                                                "nullable": true
                                            },
                                            "phone": {
                                                "type": "string",
                                                "nullable": true
                                            },
                                            "department": {
                                                "type": "string",
                                                "nullable": true
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Solo administradores"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Docentes"
                ],
                "summary": "CU06 - Crear docente",
                "description": "Registra un nuevo docente en el sistema",
                "operationId": "232f4cec049f7f25ccdce549242471bb",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "email"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Juan Pérez"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan.perez@universidad.edu"
                                    },
                                    "dni": {
                                        "type": "string",
                                        "example": "12345678",
                                        "nullable": true
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+591 70123456",
                                        "nullable": true
                                    },
                                    "department": {
                                        "type": "string",
                                        "example": "Ingeniería de Sistemas",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Docente creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "422": {
                        "description": "Validación fallida - Email duplicado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/teachers/{id}": {
            "get": {
                "tags": [
                    "Docentes"
                ],
                "summary": "CU06 - Ver docente",
                "description": "Obtiene los detalles de un docente específico",
                "operationId": "99560f14c85bbc9bc2411477de3479dd",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Docente encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string"
                                        },
                                        "dni": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "phone": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "department": {
                                            "type": "string",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Docente no encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Docentes"
                ],
                "summary": "CU06 - Eliminar docente",
                "description": "Elimina un docente del sistema (solo administradores)",
                "operationId": "8cdf35012d9c8278e43bb384ce1d70db",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Docente eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Teacher deleted"
                                        },
                                        "id": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Docente no encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Docentes"
                ],
                "summary": "CU06 - Actualizar docente (Admin)",
                "description": "Actualiza los datos de un docente (solo administradores)",
                "operationId": "b1e4694132990a3485ac634c072a8a47",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "dni": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "phone": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "department": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Docente actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden"
                    },
                    "404": {
                        "description": "Docente no encontrado"
                    },
                    "422": {
                        "description": "Validación fallida"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        },
        "/api/teachers/me": {
            "get": {
                "tags": [
                    "Docentes"
                ],
                "summary": "CU07 - Ver mi perfil de docente",
                "description": "El docente autenticado visualiza su propio perfil",
                "operationId": "d0df8488ceb40267a13fcf25fb02a385",
                "responses": {
                    "200": {
                        "description": "Perfil del docente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string"
                                        },
                                        "dni": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "phone": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "department": {
                                            "type": "string",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "404": {
                        "description": "Perfil de docente no encontrado"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Docentes"
                ],
                "summary": "CU07 - Actualizar mi perfil de docente",
                "description": "El docente autenticado edita su propio perfil",
                "operationId": "4fc787e926b1b7f2a0549d66b036b57d",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "dni": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "phone": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "department": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Perfil actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "422": {
                        "description": "Validación fallida"
                    }
                },
                "security": [
                    {
                        "cookieAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "securitySchemes": {
            "cookieAuth": {
                "type": "apiKey",
                "name": "laravel_session",
                "in": "cookie"
            }
        }
    },
    "tags": [
        {
            "name": "Periodos Académicos",
            "description": "Periodos Académicos"
        },
        {
            "name": "Admin",
            "description": "Admin"
        },
        {
            "name": "Asistencias",
            "description": "Asistencias"
        },
        {
            "name": "Reportes",
            "description": "Reportes"
        },
        {
            "name": "Cancelaciones",
            "description": "Cancelaciones"
        },
        {
            "name": "Conflictos",
            "description": "Conflictos"
        },
        {
            "name": "Grupos",
            "description": "Grupos"
        },
        {
            "name": "Importación",
            "description": "Importación"
        },
        {
            "name": "Reservas",
            "description": "Reservas"
        },
        {
            "name": "Roles",
            "description": "Roles"
        },
        {
            "name": "Aulas",
            "description": "Aulas"
        },
        {
            "name": "Horarios",
            "description": "Horarios"
        },
        {
            "name": "Materias",
            "description": "Materias"
        },
        {
            "name": "Asignaciones",
            "description": "Asignaciones"
        },
        {
            "name": "Docentes",
            "description": "Docentes"
        }
    ]
}